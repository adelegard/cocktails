-@pageTitle = "Profile"

.page-header.profile
    %img.fl.avatar_large{"data-email" => @user.email}
    .top_details.span6
        %h1
            = @user.name
            %small=@user.location
        %br
        %a.url{:href => @user.url}=@user.url
        .expandable.muted=@user.about_me
        =render :partial => '/users/follow_btn', :locals => {:is_following => @is_following, :user_id => @user.id}
    .stats
        %a.left
            %span
                %strong.followers=@follower_users.size
                Followers
        %a.middle
            %span
                %strong=@num_favorited
                Favorites
        %a.right
            %span
                %strong=@num_liked
                Likes
    .cb
.profile_tabs
    .tabbable.tabs-left
        %ul.nav.nav-tabs.span2
            %li.active
                %a{:href => "#recipes_tab", "data-toggle" => "tab"}
                    Created Recipes
                    %span.muted.fr=@full_recipes_created.size
            %li
                %a{:href => "#favorites_tab", "data-toggle" => "tab"}
                    Favorites
                    %span.muted.fr=@full_recipes_favorites.size
            %li
                %a{:href => "#rated_tab", "data-toggle" => "tab"}
                    Rated
                    %span.muted.fr=@full_recipes_rated.size
            %li
                %a{:href => "#photos_tab", "data-toggle" => "tab"}
                    Photos
                    %span.muted.fr=@photos.size
            %li
                %a{:href => "#following_tab", "data-toggle" => "tab"}
                    Following
                    %span.muted.fr=@following_users.size
            %li
                %a{:href => "#cabinet_tab", "data-toggle" => "tab"}
                    Liquor Cabinet
                    %span.muted.fr=@lc_ingredients.size
        .tab-content.span10
            #recipes_tab.tab-pane.fade.in.active
                %h2 Created Recipes
                %hr
                = render :partial => '/search/search_results_table_design2', :locals => {:full_recipes => @full_recipes_created, :total_ratings => @total_ratings_created, :hide_no_results_msg => true}
                -if @full_recipes_created.length == 0
                    %h2
                        -if @is_current_user
                            You haven't created any recipes!
                            %a{:href => new_recipe_path} Create one now!
                        -else
                            =render :partial => 'users/user_name', :locals => {:user => @user}
                            hasn't created any recipes!
                            %br
                            %small
                                Show them how it's done and
                                %a{:href => new_recipe_path} create one now!
            #favorites_tab.tab-pane.fade.in
                %h2 Favorite Recipes
                %hr
                = render :partial => '/search/search_results_table_design2', :locals => {:full_recipes => @full_recipes_favorites, :total_ratings => @total_ratings_favorites, :hide_no_results_msg => true}
                -if @full_recipes_favorites.length == 0
                    %h2
                        -if @is_current_user
                            You haven't favorited any recipes!
                            -small_msg = "to view some popular recipes. Find some you love and favorite away!"
                        -else
                            =render :partial => 'users/user_name', :locals => {:user => @user}
                            hasn't favorited any recipes!
                            -small_msg = "to view some popular recipes, favorite away, and show them how it's done!"
                        %br
                        %small
                            %a{:href => recipes_popular_path} Click here
                            =small_msg
            #rated_tab.tab-pane.fade.in
                %h2 Rated Recipes
                %hr
                = render :partial => '/search/search_results_table_design2', :locals => {:full_recipes => @full_recipes_rated, :total_ratings => @total_ratings_rated, :hide_no_results_msg => true}
                -if @full_recipes_rated.length == 0
                    %h2
                        -if @is_current_user
                            You haven't rated any recipes!
                            -small_msg = "to view some popular recipes. Find some you love and rate away!"
                        -else
                            =render :partial => 'users/user_name', :locals => {:user => @user}
                            hasn't rated any recipes!
                            -small_msg = "to view some popular recipes, rate away, and show them how it's done!"
                        %br
                        %small
                            %a{:href => recipes_popular_path} Click here
                            =small_msg
                    %br
                    %h3
                        %small
                            p.s. To rate a recipe, simply click on the star that you think a given recipe deserves!
                            %br
                            Try it here: 
                            =render :partial => '/recipes/rating_links', :locals => {:recipe_id => -1, :user_rating => 4, :avg_rating => 4, :num_rated => 23}
            #photos_tab.tab-pane.fade.in
                %h2 Uploaded Photos
                %hr
                =render :partial => 'widgets/photos', :locals => {:photos => @photos, :is_recipe => true}
            #following_tab.tab-pane.fade.in
                %h2 Following
                %hr
                -@following_users.each do |f|
                    .follow_container
                        %a{:href => user_path(f)}
                            %img.fl.avatar_medium{"data-email" => f.email}
                        %span.tac=f.name
                        =render :partial => '/users/follow_btn', :locals => {:is_following => true, :user_id => f.id}
                -if @following_users.size == 0
                    %h2
                        -if @is_current_user
                            You're not following anyone!
                        -else
                            =render :partial => 'users/user_name', :locals => {:user => @user}
                            isn't following anyone!
                        %br
                        %small
                            %a{:href => recipes_new_path} Click here
                            to view new user-submitted recipes. Follow the users creating your favorites!
            #cabinet_tab.cabinet.tab-pane.fade.in
                %h2 Liquor Cabinet
                %hr
                =render :partial => '/recipes/liquor_cabinet', :locals => {:ingredients => @lc_ingredients, :editable => @is_current_user}
